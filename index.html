<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>ORBIS v2 (.1)</title>
  <link type="text/css" rel="stylesheet" href="orbis.css" />
  <meta charset="utf-8" />
</head>

<body>
  <div id="restoreButton" style="display: none;position: fixed; top:30px; left:30px;"><button style="cursor:pointer;" onclick="restoreControlsMap();">Controls</button></div>
  <div class="controlsDiv" style="position: fixed; bottom:10px; right:10px; background: white;">
    <a href="https://github.com/emeeks/orbis_v2"><img style="position: fixed; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
  </div>

  <div id="vizcontainer">
    <div id="legendmodal" class="popup">
      <span id="infoclosebutton" onclick="d3.select('#legendmodal').style('display','none')" >X</span>
      <svg id="legendSVG"></svg>
    </div>
    <div id="routemodal" class="modal"></div>
    <div id="sitemodal" class="modal"></div>
    <div id="clustermodal" class="modal">
      <span id="infoclosebutton" onclick="d3.select('#clustermodal').style('display','none')" >X</span>
      <p id="clustercontent"></p>
    </div>
    <div id="infopopup" class="popup">
      <span id="infoclosebutton" onclick="d3.select('#infopopup').style('display','none')" >X</span>
      <div id="infocontent">
    <p>Welcome to ORBIS v2 (beta)</p>
    <p>Please send any bugs or feature requests or other feedback to <a href="mailto:emeeks@stanford.edu">Elijah Meeks (emeeks@stanford.edu)</a></p>
    </div>
      <button class="multiSiteControl" onclick="massSiteChange('off')">Exclude these sites</button><button class="multiSiteControl" onclick="massSiteChange('on')">Include these sites</button>
      <button class="multiSiteControl" onclick="massSiteChange('intersect')">Only These Sites</button><button class="multiSiteControl" onclick="massSiteChange('exclude')">All Sites But These</button>
<button class="multiSiteControl" onclick="massSiteChange('all')">All Sites</button><button class="multiSiteControl" onclick="massSiteChange('none')">No Sites</button>
      </div>
    <div id="tutorialpopup" class="tutorial">
      <span id="infoclosebutton" onclick="d3.select('#tutorialpopup').style('display','none')" >X</span>
      <div id="tutorialarrow" style="width:20px;height:20px;transform: rotate(45deg);-ms-transform: rotate(45deg);-webkit-transform: rotate(45deg);background:white;  border-left: solid 2px lightgray;border-top: solid 2px lightgray;position:absolute;left:20px;top:-12px;"></div>
      <div id="tutorialcontent">
        <p>Here's some tutorial content.</p>
      </div>
    </div>

  </div>
    <div class="controlsDiv" style="position: fixed; top: 10%; right: 0px; height:100px; width: 200px; background: white;">
    <div class="buttonContainer" style="width: 180px;">
      <button onclick="fullscreenMap();">Full Screen</button>
      <button id="startBrushingButton" onclick="startBrushing();">Select Sites</button>
      <button id="stopBrushingButton" style="display:none;" onclick="stopBrushing();">Stop Selecting</button>
      <button onclick="createVoronoi();">Regions</button>
        <button class="controlButton" onclick="cartogramOff()">Reset Map</button>
      <button onclick="clusterSitesUI()">Cluster</button>
      <button onclick="">Tutorial</button>
      <button onclick="mapOff();">Terrain</button>
      <button onclick="temporaryLabels();">Labels</button>
      <button onclick="exportSVG();">Export SVG</button>
      <p><a id="svgDownload">Download SVG</a></p>
      <p>You can also browse routes and cartograms run on ORBIS:</p>
      <button onclick="d3.select('#controlbar').style('display', 'none');d3.selectAll('#resultsTable').style('display', 'block');d3.selectAll('.resultsRow').style('display', 'none');d3.selectAll('.routeRow').style('display','block');d3.selectAll('tr.routeRow').style('display','table-row');">Routes</button>
      <button  onclick="d3.select('#controlbar').style('display', 'none');d3.selectAll('#resultsTable').style('display', 'block');d3.selectAll('.resultsRow').style('display', 'none');d3.selectAll('.cartoRow').style('display','block');d3.selectAll('tr.cartoRow').style('display','table-row');">Cartograms</button>
      <p>Color the network by priority to get a sense of how the network changes based on priority.</p>
      <button id="eButton" class="routeLabelButton controlButton" onclick="colorBy('e')">Expense</button> <button id="sButton" class="routeLabelButton controlButton" onclick="colorBy('s')">Speed</button> <button id="tButton" class="routeLabelButton controlButton active" onclick="colorByType()">Type</button>
    </div>
    </div>

  <div class="controlsDiv" id="controlbar" style="position: fixed; top: 10%; left: 0px; height:80%; width: 230px; background: white;">
    <button onclick="switchControls('route');" style="position:absolute;top:-22px">Route</button><button onclick="switchControls('cartogram');" style="position:absolute;left:45px;top:-22px">Cartogram</button>
    <div class="buttonContainer" style="background:#F8F8F8;width:140px">
      <select id="sourceSelectButton" class="controlButton">
        </select> <select id="targetSelectButton" class="controlButton">
        </select>
    </div>
    <div class="buttonContainer">
      <fieldset id="monthPicker">
      <input type="radio" name="month" value="1" id="jan">
      <label for="jan" class="month-picker-label">Jan</label>
      <input type="radio" name="month" value="2" id="feb">
      <label for="feb" class="month-picker-label">Feb</label>
      <input type="radio" name="month" value="3" id="mar">
      <label for="mar" class="month-picker-label">Mar</label>
      <input type="radio" name="month" value="4" id="apr">
      <label for="apr" class="month-picker-label">Apr</label>
      <input type="radio" name="month" value="5" id="may">
      <label for="may" class="month-picker-label">May</label>
      <input type="radio" name="month" value="6" id="jun">
      <label for="jun" class="month-picker-label">Jun</label>
      <input type="radio" name="month" value="7" id="jul">
      <label for="jul" class="month-picker-label">Jul</label>
      <input type="radio" name="month" value="8" id="aug">
      <label for="aug" class="month-picker-label">Aug</label>
      <input type="radio" name="month" value="9" id="sep" checked="">
      <label for="sep" class="month-picker-label">Sep</label>
      <input type="radio" name="month" value="10" id="oct">
      <label for="oct" class="month-picker-label">Oct</label>
      <input type="radio" name="month" value="11" id="nov">
      <label for="nov" class="month-picker-label">Nov</label>
      <input type="radio" name="month" value="12" id="dec">
      <label for="dec" class="month-picker-label">Dec</label>
    </fieldset>
    </div>

    <div class="buttonContainer">
      <button id="fPriority" class="controlButton priorityButton active" onclick="priorityClick(this)">Fastest</button> <button id="cPriority" class="controlButton priorityButton" onclick="priorityClick(this)">Cheapest</button> <button id="sPriority" class="controlButton priorityButton" onclick="priorityClick(this)">Shortest</button>
    </div>

    <div class="buttonContainer" style="background:#F8F8F8;width:210px">
      <button id="roadFlip" class="controlButton active" onclick="flipButton(this);updateBGRoutes();">Road</button> <button id="riverFlip" class="controlButton active" onclick="flipButton(this);updateBGRoutes();">River</button> <button id="coastFlip" class="controlButton active" onclick="flipButton(this);updateBGRoutes();">Coastal Sea</button>
      <button id="seaFlip" class="controlButton active" onclick="flipButton(this);updateBGRoutes();">Open Sea</button> <button id="dayFlip" class="controlButton" onclick="flipButton(this);updateBGRoutes();">Coastal (Daylight)</button>
    </div>

    <div class="buttonContainer">
      <button id="aquaticSea" style="background:lightgreen;" class="controlButton" onclick="aquaticOptions(this)">Civilian River</button> <button id="aquaticRiver" style="background:lightgreen;" class="controlButton" onclick="aquaticOptions(this)">Fast Sea</button>
    </div>

    <div class="buttonContainer" style="background:#F8F8F8;width:190px">
      Vehicle Type <select id="vehicleSelectButton" style="width:170px;" class="controlButton" onclick="colorBy('e')">
        </select> Transfer cost: <input type="text" style="width:30px;" id="transferCost" class="controlButton" onclick="colorByType()" /> days <button style="float:right;">Advanced</button> 
    </div>

    <div style="background:lightred" class="buttonContainer">
      <button class="controlButton" id="routeCalculateButton" onclick="calculateRoute()">Calculate Route</button>
      <button class="controlButton" id="cartoCalculateButton" style="display:none;" onclick="calculateCarto()">Calculate Cartogram</button>
          <div id="routeResults" class="modal"></div>
    </div>
  </div>
      <div id="resultsTable" style="display:none;background:white;border:1px black solid;position:absolute;left:0px;top:10%;height:80%;width:540px;overflow: hidden;z-index: 99;">
      <div>
        <button onclick="d3.selectAll('.resultsRow').style('display', 'none');d3.selectAll('.cartoRow').style('display','block');d3.selectAll('tr.cartoRow').style('display','table-row');">Cartograms</button>
        <button onclick="d3.selectAll('.resultsRow').style('display', 'none');d3.selectAll('.routeRow').style('display','block');d3.selectAll('tr.routeRow').style('display','table-row');">Routes</button>
        <button onclick="d3.selectAll('.resultsRow').style('display', 'block');d3.selectAll('tr.resultsRow').style('display','table-row');">All</button>
        <button onclick="d3.selectAll('.resultsContainer').style('display', 'none');d3.selectAll('#recentGrid').style('display', 'block');">Grid View</button>
        <button onclick="d3.selectAll('.resultsContainer').style('display', 'none');d3.selectAll('#recentList').style('display', 'block');">List View</button>
        <button onclick="d3.selectAll('.resultsContainer').style('display', 'none');d3.selectAll('#recentTable').style('display', 'block');">Table View</button>
        <button onclick="d3.select('#controlbar').style('display', 'block');d3.selectAll('#resultsTable').style('display', 'none');">CLOSE</button>
      </div>
      <div id="recentList" class="resultsContainer" style="overflow: auto;height:520px;border-top:1px lightgray solid;">
      </div>
      <div id="recentGrid" class="resultsContainer" style="display:none;overflow: auto;height:520px;border-top:1px lightgray solid;">
      </div>
      <div id="recentTable" class="resultsContainer" style="display:none;overflow: auto;height:520px;border-top:1px lightgray solid;">
        <table style="width:540px;">
          <caption>Results</caption>
          <thead>
            <tr>
              <th>Start</th>
              <th>End</th>
              <th>Priority</th>
              <th>Month</th>
              <th>Vehicle</th>
              <th>Thumb</th>
            </tr>
            <tbody id="recTableActual">
              
            </tbody>
          </thead>
        </table>
      </div>
    </div>
  <div id="timelineViz">
    <button id="tlbPerspective" style="position:absolute;z-index: 1;top:-15px;left:20px;" >Perspective</button>
    <button id="tlbDuration" style="position:absolute;z-index: 1;top:-15px;left:120px;" >Duration</button>
    <button id="tlbDistance" style="position:absolute;z-index: 1;top:-15px;left:220px;" >Distance</button>
    <button id="tlbExpensed" style="position:absolute;z-index: 1;top:-15px;left:320px;" >Expense (D)</button>
    <button id="tlbExpensew" style="position:absolute;z-index: 1;top:-15px;left:420px;" >Expense (W)</button>
    <button id="tlbExpensec" style="position:absolute;z-index: 1;top:-15px;left:520px;" >Expense (C)</button>
    <button id="tlbDistance" style="position:absolute;z-index: 1;top:-15px;left:620px;" onclick="d3.select('#timelineViz').style('display','none');" >Close Timeline</button>
<svg id="timelineSVG" width="100%" height="100%">
  <g id="tlAxis" transform="translate(0,80)"></g>
</svg>

  </div>

  <footer>
    <script src="o_settings.js" type="text/javascript">
</script> <script src="d3.v3.min.js" type="text/javascript">
</script> <script src="d3.geo.tile.v0.min.js" type="text/javascript">
</script> <script src="topojson.js" type="text/javascript">
</script> <script src="colorbrewer.js" type="text/javascript">
</script> <script src="legend.js" type="text/javascript">
</script> <script src="clipper.js" type="text/javascript">
</script> <script src="orbis.js" type="text/javascript">
</script>
  </footer>
</body>
</html>
